var ratchet=function(){function a(a,b){this.value=parseFloat(a)||a,this.units=b||"px"}function b(b,c){c=c||{},this.type=b,this.x=new a(typeof c.x!="undefined"?c.x:0),this.y=new a(typeof c.y!="undefined"?c.y:0),c.z&&(this.z=new a(c.z))}function c(a){a=a||{},this.translate=new b(a.translate),this.rotate=new b(a.rotate),this.scale=new b(a.scale)}function d(a,b){var c=a+"\\(";return(b||"").split(/\s/).forEach(function(a){c+=e[a]}),new RegExp(c+"\\)")}function g(a){var d=new c,e,g,h,i,j;for(e in f)f[e].forEach(function(c){g=c.regex.exec(a),h={};if(g){if(typeof c.extract=="function")c.extract(g,h);else for(i in c)i!=="regex"&&typeof c[i]=="function"&&(h[i]=c[i](g));d[e]=new b(e,h)}});return d}function h(b,c){return function(d){var e,f;if(typeof c=="undefined"||c)e=d[b+1];return new a(d[b],e)}}function i(a){if(typeof a=="string"||a instanceof String)return g(a)}a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return this.value+this.units},a.prototype.matchingUnits=function(){var a=!0;for(var b=arguments.length;b--;)a=arguments[b].units===this.units;return a},b.prototype.add=function(a){var c=this.x.valueOf(),d=this.y.valueOf(),e=this.z?this.z.valueOf():0;if(typeof a=="number")c+=a,d+=a,e=typeof this.z!="undefined"?e+a:0;else for(var f=arguments.length;f--;)c+=arguments[f].x,d+=arguments[f].y,e+=arguments[f].z;return new b(this.type,{x:c,y:d,z:e})},b.prototype.invert=function(){return new b(this.type,{x:-x,y:-y,z:-z})},b.prototype.toString=function(a){return this.type+"("+[this.x,this.y].join(", ")+")"},c.prototype={add:function(a){var d=new c;return typeof a=="number"?d.translate=this.translate.add(a):d.translate=b.prototype.add.apply(this.translate,Array.prototype.map.call(arguments,function(a){return a.translate})),d},sub:function(){var a=[];for(var b=arguments.length;b--;)typeof arguments[b]=="number"?a[b]=-arguments[b]:a[b]=arguments[b].invert();this.add.apply(this,a)}};var e={val:"(\\-?[\\d\\.]+)",unit:"([^s]+)",",":"\\,\\s*"},f={translate:[{regex:d("translate","val unit , val unit"),x:h(1),y:h(3)},{regex:d("translate(X|Y|Z)","val unit"),extract:function(a,b){b[a[1].toLowerCase()]=h(2)(a)}},{regex:d("translate","val unit , val unit , val unit"),x:h(1),y:h(3),z:h(5)}],rotate:[{regex:d("rotate","val unit"),z:h(1)},{regex:d("rotate(X|Y|Z)","val unit"),extract:function(a,b){b[a[1].toLowerCase()]=h(2)(a)}}],scale:[{regex:d("scale","val"),x:h(1,!1),y:h(1,!1)},{regex:d("scale","val , val"),x:h(1,!1),y:h(2,!1)}]};return i.fromString=g,i}()